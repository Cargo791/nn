<%- include('partials/header') %>

  <div class="jumbotron text-center">
    <div class="container">
      
      <h2 class="display-3">Welcome <%= name %></h2>
<div style="display: flex; padding-bottom: 10px;">
      <a href="../public/css/index.html">
        <button style="background-color: green; cursor: pointer; padding: 10px; color: bisque; border: 0; border-radius: 5px; margin-bottom: 20px;">Deposit</button>
      </a>

      <form action="/withdraw" method="POST">
  <input type="hidden" name="email" value="<%= email %>">
  <button class="btn btn-danger" type="submit">Withdraw</button>
</form>

  <% if (typeof errorMessage !== "undefined" && errorMessage) { %>
  <div class="alert alert-danger"><%= errorMessage %></div>
<% } %>
</div>     

      <p class="secret-text">Your Wallet Balances:</p>

      

  



<table border="1" cellspacing="0" cellpadding="10">
  <thead>
    <tr>
      <th>Coin</th>
      <th>Balance</th>
      <th>USD Value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Bitcoin (BTC)</td>
      <td><%= parseFloat(btc || 0).toFixed(8) %> BTC</td>
      <td>$<%= (parseFloat(btc || 0) * parseFloat(prices.btc || 0)).toFixed(2) %></td>
    </tr>
    <tr>
      <td>Ethereum (ETH)</td>
      <td><%= parseFloat(eth || 0).toFixed(8) %> ETH</td>
      <td>$<%= (parseFloat(eth || 0) * parseFloat(prices.eth || 0)).toFixed(2) %></td>
    </tr>
    <tr>
      <td>Solana (SOL)</td>
      <td><%= parseFloat(sol || 0).toFixed(8) %> SOL</td>
      <td>$<%= (parseFloat(sol || 0) * parseFloat(prices.sol || 0)).toFixed(2) %></td>
    </tr>
    <tr>
      <td>Binance Coin (BNB)</td>
      <td><%= parseFloat(bnb || 0).toFixed(8) %> BNB</td>
      <td>$<%= (parseFloat(bnb || 0)* parseFloat(prices.bnb || 0)).toFixed(2) %></td>
    </tr>
  </tbody>
</table>
       

    </div>
  </div>
  <div style="text-align: center; padding-bottom: 20%;">
        <p class="secret-text">Top you with Crypto:</p>
<form action="/start-btc-payment" method="POST">
  <input type="hidden" name="email" value="<%= email %>">
  <input type="number" name="amount" step="0.0001" placeholder="Amount in BTC" required>
  <button type="submit">Make Btc Payment</button>
</form>
<% if (typeof paymentStatus !== 'undefined' && paymentStatus === 'processing') { %>
  <p style="color: orange;">Payment is being processed. Waiting for confirmation…</p>
  <p>Send <%= btcAmount %> BTC to:</p>
  <code><%= btcAddress %></code>
<% } else if (paymentStatus === 'confirmed') { %>
  <p style="color: green;">Payment confirmed. Your balance is updated.</p>
<% } %>

<form action="/start-eth-payment" method="POST">
  <input type="hidden" name="email" value="<%= email %>">
  <input type="number" name="amount" step="0.0001" placeholder="Amount in ETH" required>
  <button type="submit">Make Eth Payment</button>
</form>
<% if (typeof paymentStatus !== 'undefined' && paymentStatus === 'processing') { %>
  <p style="color: orange;">Payment is being processed. Waiting for confirmation…</p>
  <p>Send <%= ethAmount %> ETH to:</p>
  <code><%= ethAddress %></code>
<% } else if (paymentStatus === 'confirmed') { %>
  <p style="color: green;">Payment confirmed. Your balance is updated.</p>
<% } %>

<form action="/start-bnb-payment" method="POST">
  <input type="hidden" name="email" value="<%= email %>">
  <input type="number" name="amount" step="0.0001" placeholder="Amount in BNB" required>
  <button type="submit">Make Bnb Payment</button>
</form>
<% if (typeof paymentStatus !== 'undefined' && paymentStatus === 'processing') { %>
  <p style="color: orange;">Payment is being processed. Waiting for confirmation…</p>
  <p>Send <%= bnbAmount %> BNB to:</p>
  <code><%= bnbAddress %></code>
<% } else if (paymentStatus === 'confirmed') { %>
  <p style="color: green;">Payment confirmed. Your balance is updated.</p>
<% } %>

<form action="/start-sol-payment" method="POST">
  <input type="hidden" name="email" value="<%= email %>">
  <input type="number" name="amount" step="0.0001" placeholder="Amount in Sol" required>
  <button type="submit">Make Sol Payment</button>
</form>
<% if (typeof paymentStatus !== 'undefined' && paymentStatus === 'processing') { %>
  <p style="color: orange;">Payment is being processed. Waiting for confirmation…</p>
  <p>Send <%= solAmount %> Sol to:</p>
  <code><%= solAddress %></code>
<% } else if (paymentStatus === 'confirmed') { %>
  <p style="color: green;">Payment confirmed. Your balance is updated.</p>
<% } %>
  </div>

<div class="dashboard">
  <h1>Crypto Dashboard</h1>
  <div class="cards2">
    <% const coins = [
      { name: "Bitcoin", symbol: "BTC", price: "45678.90", change: 2.34 },
      { name: "Ethereum", symbol: "ETH", price: "3200.445", change: -1.25 },
      { name: "Solana", symbol: "SOL", price: "150.67", change: -0.89 },
      { name: "Cardano", symbol: "ADA", price: "1.25", change: -2.14 },
      { name: "Polkadot", symbol: "DOT", price: "30.12", change: 0.76 }
    ]; %>

    <% coins.forEach(coin => { %>
      <div class="card2">
        <div class="top">
          <h2><%= coin.name %></h2>
          <span><%= coin.symbol %></span>
        </div>
        <div class="price">$<%= coin.price %></div>
        <div class="change <%= coin.change >= 0 ? 'green' : 'red' %>">
          <%= coin.change %>%
        </div>
      </div>
    <% }); %>
  </div>
</div>
 

  <%- include('partials/footer') %>
