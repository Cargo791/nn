<%- include('partials/header') %>

  <div class="po">
    <div class="container-fluid">

       


      <div class="opo">

           <div style="background-color: yellow; height: 70px;">
    <h2 style="padding: 20px; padding-bottom: 100px;"> Welcome <%= name %></h2>
</div>
<!-- TradingView Widget BEGIN -->
<div class="tradingview-widget-container">
  <div class="tradingview-widget-container__widget"></div>
  <div class="tradingview-widget-copyright"><a href="https://www.tradingview.com/" rel="noopener nofollow" target="_blank"><span class="blue-text">Track all markets on TradingView</span></a></div>
  <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-ticker-tape.js" async>
  {
  "symbols": [
    {
      "proName": "FOREXCOM:SPXUSD",
      "title": "S&P 500 Index"
    },
    {
      "proName": "FOREXCOM:NSXUSD",
      "title": "US 100 Cash CFD"
    },
    {
      "proName": "FX_IDC:EURUSD",
      "title": "EUR to USD"
    },
    {
      "proName": "BITSTAMP:BTCUSD",
      "title": "Bitcoin"
    },
    {
      "proName": "BITSTAMP:ETHUSD",
      "title": "Ethereum"
    },
    {
      "proName": "CRYPTOCAP:SOL",
      "title": "Sol"
    },
    {
      "proName": "CRYPTOCAP:BNB",
      "title": "BNB"
    }
  ],
  "colorTheme": "light",
  "locale": "en",
  "largeChartUrl": "",
  "isTransparent": false,
  "showSymbolLogo": true,
  "displayMode": "adaptive"
}
  </script>
</div>
<!-- TradingView Widget END -->

<hr>
<div style="display: flex; padding-top: 50px; flex-direction: column; gap: 10px; max-width: 400px; margin: auto;">

  <div style="background: #00bcd4; color: white; padding: 20px; border-radius: 5px; display: flex; justify-content: space-between;">
    <div>
      <h3>CRYPTO <%= deposit.toFixed(2) %></h3>
      <p style="opacity: 0.7;">Deposits</p>
    </div>
    <div>$</div>
  </div>

  <div style="background: #4caf50; color: white; padding: 20px; border-radius: 5px; display: flex; justify-content: space-between;">
    <div>
      <h3>CRYPTO <%= profit.toFixed(2) %></h3>
      <p style="opacity: 0.7;">PROFIT</p>
    </div>
    <div>$</div>
  </div>

  <div style="background: #f44336; color: white; padding: 20px; border-radius: 5px; display: flex; justify-content: space-between;">
    <div>
      <h3>CRYPTO <%= withdrawal.toFixed(2) %></h3>
      <p style="opacity: 0.7;">TOTAL WITHDRAWAL</p>
    </div>
    <div>ðŸ’µ</div>
  </div>
  <!-- TradingView Widget BEGIN -->
<div class="tradingview-widget-container" style="height:100%;width:100%">
  <div class="tradingview-widget-container__widget" style="height:calc(100% - 32px);width:100%"></div>
  <div class="tradingview-widget-copyright"><a href="https://www.tradingview.com/" rel="noopener nofollow" target="_blank"><span class="blue-text">Track all markets on TradingView</span></a></div>
  <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js" async>
  {
  "allow_symbol_change": true,
  "calendar": false,
  "details": false,
  "hide_side_toolbar": true,
  "hide_top_toolbar": false,
  "hide_legend": false,
  "hide_volume": false,
  "hotlist": false,
  "interval": "1",
  "locale": "en",
  "save_image": true,
  "style": "1",
  "symbol": "BINANCE:BTCUSDT",
  "theme": "dark",
  "timezone": "America/Chicago",
  "backgroundColor": "#ffffff",
  "gridColor": "rgba(46, 46, 46, 0.06)",
  "watchlist": [],
  "withdateranges": false,
  "compareSymbols": [],
  "studies": [],
  "autosize": true
}
  </script>
</div>

</div>
<form id="deposit-form" action="/deposit" method="POST">
  <h3>Make a Deposit</h3>

  <!-- Select Coin -->
  <select id="coin" name="coin" onchange="updateAddress()">
    <option value="btc">BTC</option>
    <option value="eth">ETH</option>
    <option value="bnb">BNB</option>
    <option value="sol">SOL</option>
  </select>

  <!-- Crypto Address Display -->
  <div>
    <label>Deposit Address:</label>
    <input type="text" id="address" readonly />
  </div>

  <!-- Amount -->
  <div>
    <label>Amount (USD)</label>
    <input type="number" step="0.01" name="amount" required />
  </div>

  <!-- Leverage Plan -->
  <div>
    <label>pkg</label>
    <select name="leverage">
      <option>STARTER</option>
      <option>VIP</option>
      <option>DELUXE</option>
    </select>
  </div>

  <!-- Submit -->
 
      
 <button type="submit" style="margin-bottom: 20px;">Deposit</button>
</form>

        <form action="/withdraw" method="POST">
  <input type="hidden" name="email" value="<%= email %>">
  <button class="btn btn-danger" type="submit">Withdraw</button>
</form>

  <% if (typeof errorMessage !== "undefined" && errorMessage) { %>
  <div class="alert alert-danger"><%= errorMessage %></div>
<% } %>

<!-- Processing & Receipt -->
<div id="processing" style="display:none; margin-top: 10px;">
  <p>ðŸ•’ Processing your deposit...</p>
  <p id="receipt"></p>
</div>
<div class="upload-form-container">
        <form action="/upload-receipt" method="POST" enctype="multipart/form-data">
  <label for="receipt">Upload payment screenshot:</label>
  <input type="file" name="receipt" accept="image/*" required>
  <button type="submit">Submit</button>
</form>
</div>


<h3 style="text-align: center; padding-bottom: 10px; padding-top: 20px;">Transaction History</h3>
<table style="padding-bottom: 50px;">
<thead>
  <tr>
    <th>Coin</th>
    <th>Amount</th>
    <th>Type</th>
    <th>Package</th>
    <th>Status</th>
    <th>Date</th>
  </tr>
</thead>
  <tbody>
  <% transactions.forEach(tx => { %>
    <tr>
      <td><%= tx.coin_type %></td>
      <td><%= tx.amount %></td>
      <td><%= tx.type %></td>
      <td><%= tx.package %></td>
      <td><%= tx.status %></td>
      <td><%= new Date(tx.created_at).toLocaleString() %></td>
    </tr>
  <% }) %>
</tbody>
</table>

<div style="">
    <div style="max-width: 500px; margin: 30px auto; padding: 25px; background-color: #f1f1f1; border: 1px solid #ddd; border-radius: 10px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;">
        <h3>Referrals</h3>
    <p>Present our community to your friends, family or any other community and enjoy the financial benefit.You dont even need an actuve deposit to receiveaffilate commmision</p>
    </div>
    
    <hr>
    <p style="text-align: center;">CopyrightÂ© Grow Vests company offers a mechanism for attracting investment</p>
</div>
<script>
  const addresses = {
    btc: "bc1q87yng5l9kyl7390gm80nreq2qmw3v7f0ryx699",
    eth: "0x497785495154a4D919Cd0aA047Fc23a778bd6337",
    bnb: "9D8d3DL9sYSHU9VVnateJEeosKg31MZNPNMJxMWkAs13",
    sol: "0x497785495154a4D919Cd0aA047Fc23a778bd6337",
  };

  function updateAddress() {
    const coin = document.getElementById('coin').value;
    document.getElementById('address').value = addresses[coin];
  }

  // Auto-load address for default
  window.onload = updateAddress;

  // Optional: simulate receipt display after deposit
  document.getElementById('deposit-form').addEventListener('submit', function(e) {
    e.preventDefault(); // remove this line if you want to use real form POST

    const coin = document.getElementById('coin').value;
    const amount = this.amount.value;
    const leverage = this.package.value;

    document.getElementById('processing').style.display = 'block';
    document.getElementById('receipt').innerText =
      `You deposited $${amount} in ${coin.toUpperCase()} using ${pkg} plan.`;
  });
</script>

       
