<%- include('partials/header') %>

  <div class="po">
    <div class="container-fluid">

       


      <div class="opo">

           <div style="background-color: yellow; height: 70px;">
    <h2 style="padding: 20px; padding-bottom: 100px;"> Welcome <%= name %></h2>
    <div style="position: absolute; top: 10px; right: 10px;">
  <div class="dropdowns">
    <img src="https://cdn2.iconfinder.com/data/icons/menu-white/64/menu_white_buttom__navbar-512.png" onclick="toggleMenu()" style="width: 32px; border-radius: 5px; height: 32px; cursor: pointer;" />
    <div id="dropdownContents" class="dropdown-contents">
      <a href="/logout">Logout</a>
      <a href="/change-password">Change Password</a>
    </div>
  </div>
</div>
</div>
</div>
<!-- TradingView Widget BEGIN -->
<div class="tradingview-widget-container">
  <div class="tradingview-widget-container__widget"></div>
  <div class="tradingview-widget-copyright"><a href="https://www.tradingview.com/" rel="noopener nofollow" target="_blank"><span class="blue-text">Track all markets on TradingView</span></a></div>
  <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-ticker-tape.js" async>
  {
  "symbols": [
    {
      "proName": "FOREXCOM:SPXUSD",
      "title": "S&P 500 Index"
    },
    {
      "proName": "FOREXCOM:NSXUSD",
      "title": "US 100 Cash CFD"
    },
    {
      "proName": "FX_IDC:EURUSD",
      "title": "EUR to USD"
    },
    {
      "proName": "BITSTAMP:BTCUSD",
      "title": "Bitcoin"
    },
    {
      "proName": "BITSTAMP:ETHUSD",
      "title": "Ethereum"
    },
    {
      "proName": "CRYPTOCAP:SOL",
      "title": "Sol"
    },
    {
      "proName": "CRYPTOCAP:BNB",
      "title": "BNB"
    }
  ],
  "colorTheme": "light",
  "locale": "en",
  "largeChartUrl": "",
  "isTransparent": false,
  "showSymbolLogo": true,
  "displayMode": "adaptive"
}
  </script>
</div>
<!-- TradingView Widget END -->

<hr>
<div style="display: flex; padding-top: 20px; flex-direction: column; gap: 10px; max-width: 400px; margin: auto;">

 <div style="background: #00bcd4; color: white; padding: 20px; border-radius: 5px; display: flex; justify-content: space-between;">
  <div>
    <h4> <%= deposit.toFixed(2) %></h4>
    <p style="opacity: 0.7;">DEPOSIT</p>
  </div>
  <div><h2><b>$</b></h2></div>
</div>

  <div style="background: #4caf50; color: white; padding: 20px; border-radius: 5px; display: flex; justify-content: space-between;">
    <div>
      <h4> <%= profit.toFixed(2) %></h4>
      <p style="opacity: 0.7;">PROFIT</p>
    </div>
    <div><h2><b>$</b></h2></div>
  </div>

  <div style="background: #f44336; color: white; padding: 20px; border-radius: 5px; display: flex; justify-content: space-between;">
    <div>
      <h4> <%= withdrawal.toFixed(2) %></h4>
      <p style="opacity: 0.7;">TOTAL WITHDRAWAL</p>
    </div>
    <div><h2><b>$</b></h2></div>
  </div>
<!-- TradingView Widget BEGIN -->
<div class="tradingview-widget-container">
  <div class="tradingview-widget-container__widget"></div>
  <div class="tradingview-widget-copyright"><a href="https://www.tradingview.com/" rel="noopener nofollow" target="_blank"><span class="blue-text">Track all markets on TradingView</span></a></div>
  <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-market-overview.js" async>
  {
  "colorTheme": "light",
  "dateRange": "12M",
  "locale": "en",
  "largeChartUrl": "",
  "isTransparent": false,
  "showFloatingTooltip": false,
  "plotLineColorGrowing": "rgba(41, 98, 255, 1)",
  "plotLineColorFalling": "rgba(41, 98, 255, 1)",
  "gridLineColor": "rgba(240, 243, 250, 0)",
  "scaleFontColor": "#0F0F0F",
  "belowLineFillColorGrowing": "rgba(41, 98, 255, 0.12)",
  "belowLineFillColorFalling": "rgba(41, 98, 255, 0.12)",
  "belowLineFillColorGrowingBottom": "rgba(41, 98, 255, 0)",
  "belowLineFillColorFallingBottom": "rgba(41, 98, 255, 0)",
  "symbolActiveColor": "rgba(41, 98, 255, 0.12)",
  "tabs": [
    {
      "title": "Coin",
      "symbols": [
        {
          "s": "BINANCE:BTCUSDT",
          "d": "",
          "base-currency-logoid": "crypto/XTVCBTC",
          "currency-logoid": "crypto/XTVCUSDT"
        },
        {
          "s": "CRYPTOCAP:SOL",
          "d": "",
          "logoid": "crypto/XTVCSOL",
          "currency-logoid": "country/US"
        },
        {
          "s": "BITSTAMP:ETHUSD",
          "d": "",
          "base-currency-logoid": "crypto/XTVCETH",
          "currency-logoid": "country/US"
        },
        {
          "s": "CRYPTOCAP:BNB",
          "d": "",
          "logoid": "crypto/XTVCBNB",
          "currency-logoid": "country/US"
        }
      ]
    },
    {
      "title": "forex",
      "symbols": [
        {
          "s": "OANDA:XAUUSD",
          "d": "",
          "logoid": "metal/gold",
          "currency-logoid": "country/US"
        },
        {
          "s": "NSE:NIFTY",
          "d": "",
          "logoid": "indices/nifty-50",
          "currency-logoid": "country/IN"
        },
        {
          "s": "CME_MINI:NQ1!",
          "d": ""
        }
      ]
    }
  ],
  "support_host": "https://www.tradingview.com",
  "width": 400,
  "height": 700,
  "showSymbolLogo": true,
  "showChart": true
}
  </script>
</div>
<!-- TradingView Widget END -->
</div>

</div>
<form id="deposit-form" action="/deposit" method="POST">
  <fieldset>
  <legend>Make a Deposit</legend>

  <!-- Select Coin -->
  <select id="coin" name="coin" onchange="updateAddress()">
    <option value="btc">BTC</option>
    <option value="eth">ETH</option>
    <option value="bnb">BNB</option>
    <option value="sol">SOL</option>
  </select>

  <!-- Crypto Address Display -->
  <div>
    <label>Deposit Address:</label>
    <input type="text" id="address" readonly />
  </div>

  <!-- Amount -->
  <div>
    <label>Amount (USD)</label>
    <input type="number" step="0.01" name="amount" required />
  </div>

  <!-- Leverage Plan -->
  <div>
    <label>pkg</label>
    <select name="pkg">
      <option>STARTER</option>
      <option>VIP</option>
      <option>DELUXE</option>
    </select>
  </div>
 <button type="submit">Withdraw</button>
    </fieldset>
</form>
  <!-- Submit -->
 
      
 
<form id="deposit-form" action="/withdraw" method="POST">
 <fieldset>
          <legend> Make a withdrawal </legend>
    <label for="coin_type">Select Coin:</label>
    <select name="coin_type" required>
        <option value="BTC">Bitcoin (BTC)</option>
        <option value="ETH">Ethereum (ETH)</option>
        <option value="SOL">Solana (SOL)</option>
        <option value="BNB">Binance Coin (BNB)</option>
    </select><br><br>

    <label for="address">Wallet Address:</label>
    <input type="text" name="address" required><br><br>
       <label>Amount (USD)</label>
    <input type="number" step="0.01" name="amount" required />

    <button type="submit">Withdraw</button>
   </fieldset>

</form>
<% if (message) { %>
    <p style="color:red"><%= message %></p>
<% } %>


<!-- Processing & Receipt -->
<div id="processing" style="display:none; margin-top: 10px;">
  <p>ðŸ•’ Processing your deposit...</p>
  <p id="receipt"></p>
</div>
<div class="upload-form-container">
        <form action="/upload-receipt" method="POST" enctype="multipart/form-data">
  <label for="receipt">Upload payment screenshot:</label>
  <input type="file" name="receipt" accept="image/*" required>
  <button type="submit">Submit</button>
</form>
</div>


<div class="container" style="max-width: 900px; margin: 30px auto; font-family: Arial, sans-serif;">
  <h3>Transaction History</h3>
  <table style="width: 100%; border-collapse: collapse; margin-top: 20px;">
    <thead style="background-color: #007BFF; color: white;">
      <tr>
        <th style="padding: 10px; border: 1px solid #ddd;">Coin</th>
        <th style="padding: 10px; border: 1px solid #ddd;">Amount</th>
        <th style="padding: 10px; border: 1px solid #ddd;">Type</th>

        <th style="padding: 10px; border: 1px solid #ddd;">Status</th>
        <th style="padding: 10px; border: 1px solid #ddd;">Date</th>
      </tr>
    </thead>
    <tbody>
      <% if (transactions.length === 0) { %>
        <tr>
          <td colspan="6" style="text-align: center; padding: 20px;">No transactions found.</td>
        </tr>
      <% } else { %>
        <% transactions.forEach(tx => { %>
          <tr style="border-bottom: 1px solid #ddd;">
            <td style="padding: 10px; text-align: center;"><%= tx.coin_type.toUpperCase() %></td>
            <td style="padding: 10px; text-align: right;">$<%= parseFloat(tx.amount).toFixed(2) %></td>
            <td style="padding: 10px; text-align: center;"><%= tx.type.charAt(0).toUpperCase() + tx.type.slice(1) %></td>

            <td style="padding: 10px; text-align: center;"><%= tx.status.charAt(0).toUpperCase() + tx.status.slice(1) %></td>
            <td style="padding: 10px; text-align: center;"><%= new Date(tx.created_at).toLocaleString() %></td>
          </tr>
        <% }); %>
      <% } %>
    </tbody>
  </table>
</div>


<div style="">
    <div style="max-width: 500px; margin: 30px auto; padding: 25px; background-color: #f1f1f1; border: 1px solid #ddd; border-radius: 10px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;">
        <h3>Referrals</h3>
    <p>Present our community to your friends, family or any other community and enjoy the financial benefit.You dont even need an actuve deposit to receiveaffilate commmision</p>
    </div>
    
    <hr>
    <p style="text-align: center;">CopyrightÂ© Grow Vests company offers a mechanism for attracting investment</p>
</div>
<script>
  const addresses = {
    btc: "bc1q87yng5l9kyl7390gm80nreq2qmw3v7f0ryx699",
    eth: "0x497785495154a4D919Cd0aA047Fc23a778bd6337",
    bnb: "9D8d3DL9sYSHU9VVnateJEeosKg31MZNPNMJxMWkAs13",
    sol: "0x497785495154a4D919Cd0aA047Fc23a778bd6337",
  };

  function updateAddress() {
    const coin = document.getElementById('coin').value;
    document.getElementById('address').value = addresses[coin];
  }

  // Auto-load address for default
  window.onload = updateAddress;

  // Optional: simulate receipt display after deposit
  document.getElementById('deposit-form').addEventListener('submit', function(e) {
    

    const coin = document.getElementById('coin').value;
    const amount = this.amount.value;
    const pkg = this.package.value;

    document.getElementById('processing').style.display = 'block';
    document.getElementById('receipt').innerText =
      `You deposited $${amount} in ${coin.toUpperCase()} using ${pkg} plan.`;
  });


function toggleMenu() {
    const dropdowns = document.getElementById("dropdownContents");
    dropdowns.style.display = dropdowns.style.display === "block" ? "none" : "block";
  }

  window.addEventListener("click", function (e) {
    if (!e.target.closest('.dropdowns')) {
      document.getElementById("dropdownContents").style.display = "none";
    }
  });
</script>

       
